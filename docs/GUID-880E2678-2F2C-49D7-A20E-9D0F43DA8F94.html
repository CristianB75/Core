<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="SYS_FS_MEDIA_FUNCTIONS Struct" />
<meta name="DC.relation" scheme="URI" content="GUID-42556FDF-A632-49FE-8A5E-9303A926578C.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="sys-fs-media-functions-struct" />
<link rel="stylesheet" type="text/css" href="stylesheets/commonltr.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<link rel="stylesheet" type="text/css" href="./stylesheets/common-extended.css" /><title>SYS_FS_MEDIA_FUNCTIONS Struct</title>
<meta name="Microsoft.Help.Id" content="GUID-EDFB1AB8-CD6B-446F-8E25-F2167287A1AF-sys-fs-media-functions-struct" />
<meta name="Microsoft.Help.TocParent" content="GUID-EDFB1AB8-CD6B-446F-8E25-F2167287A1AF" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLABÂ® Harmony Core Library Reference A 11/2021" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-880E2678-2F2C-49D7-A20E-9D0F43DA8F94"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style></head>
<body id="sys-fs-media-functions-struct">
<h1 class="title topictitle1" id="ariaid-title1">SYS_FS_MEDIA_FUNCTIONS Struct</h1><div class="body"></div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-42556FDF-A632-49FE-8A5E-9303A926578C.html">Library Interface</a></div>
</div>
</div><div class="topic nested1" aria-labelledby="ariaid-title2" id="c"><h2 class="title topictitle2" id="ariaid-title2">C</h2><div class="body"><pre class="pre codeblock language-c"><button title="Copy Code" class="copy-code" onclick="cpy('d186434e21', this);">Copy</button><code id="d186434e21" content="typedef struct&#xA;{&#xA;    /* To obtains status of media */&#xA;    bool (*mediaStatusGet)(DRV_HANDLE handle);&#xA;    /* Function to get media geometry */&#xA;    SYS_FS_MEDIA_GEOMETRY * (*mediaGeometryGet)(const DRV_HANDLE handle);&#xA;    /* Function for sector read */&#xA;    void (*sectorRead)(DRV_HANDLE clientHandle,SYS_FS_MEDIA_BLOCK_COMMAND_HANDLE * commandHandle,&#xA;    void * buffer, uint32_t blockStart, uint32_t nBlock);&#xA;    /* Function for sector write */&#xA;    void (*sectorWrite)(const DRV_HANDLE handle,SYS_FS_MEDIA_BLOCK_COMMAND_HANDLE * commandHandle,&#xA;    void * sourceBuffer, uint32_t blockStart,uint32_t nBlock);&#xA;    /* Function register the event handler with media */&#xA;    void (*eventHandlerset)(DRV_HANDLE handle, const void * eventHandler, const uintptr_t context);&#xA;    /* Function to obtain the command status */&#xA;    SYS_FS_MEDIA_COMMAND_STATUS (*commandStatusGet)(DRV_HANDLE handle,&#xA;    SYS_FS_MEDIA_BLOCK_COMMAND_HANDLE commandHandle);&#xA;    /* Function to read certain bytes from the media */&#xA;    void (*Read) (DRV_HANDLE clientHandle,SYS_FS_MEDIA_BLOCK_COMMAND_HANDLE * commandHandle,&#xA;    void * buffer, uint32_t blockStart, uint32_t nBlock);&#xA;    /* Function to obtain the address of the media (to be used for NVM only) */&#xA;    uintptr_t (*addressGet) ( const DRV_HANDLE hClient);&#xA;    void (*erase) ( const DRV_HANDLE handle,SYS_FS_MEDIA_BLOCK_COMMAND_HANDLE * commandHandle,&#xA;    uint32_t blockStart,uint32_t nBlock);&#xA;    /* Function to open the media driver */&#xA;    DRV_HANDLE (*open)(SYS_MODULE_INDEX index, DRV_IO_INTENT intent);&#xA;    /* Function to close the media */&#xA;    void (*close)(DRV_HANDLE client);&#xA;    /* Task function of the media */&#xA;    void (*tasks)(SYS_MODULE_OBJ obj);&#xA;    &#xA;} SYS_FS_MEDIA_FUNCTIONS;&#xA;"><span class="ph token keyword">typedef</span> <span class="ph token keyword">struct</span>
<span class="ph token punctuation">{</span>
    <span class="ph token comment">/* To obtains status of media */</span>
    bool <span class="ph token punctuation">(</span><span class="ph token operator">*</span>mediaStatusGet<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span>DRV_HANDLE handle<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token comment">/* Function to get media geometry */</span>
    SYS_FS_MEDIA_GEOMETRY <span class="ph token operator">*</span> <span class="ph token punctuation">(</span><span class="ph token operator">*</span>mediaGeometryGet<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span><span class="ph token keyword">const</span> DRV_HANDLE handle<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token comment">/* Function for sector read */</span>
    <span class="ph token keyword">void</span> <span class="ph token punctuation">(</span><span class="ph token operator">*</span>sectorRead<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span>DRV_HANDLE clientHandle<span class="ph token punctuation">,</span>SYS_FS_MEDIA_BLOCK_COMMAND_HANDLE <span class="ph token operator">*</span> commandHandle<span class="ph token punctuation">,</span>
    <span class="ph token keyword">void</span> <span class="ph token operator">*</span> buffer<span class="ph token punctuation">,</span> uint32_t blockStart<span class="ph token punctuation">,</span> uint32_t nBlock<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token comment">/* Function for sector write */</span>
    <span class="ph token keyword">void</span> <span class="ph token punctuation">(</span><span class="ph token operator">*</span>sectorWrite<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span><span class="ph token keyword">const</span> DRV_HANDLE handle<span class="ph token punctuation">,</span>SYS_FS_MEDIA_BLOCK_COMMAND_HANDLE <span class="ph token operator">*</span> commandHandle<span class="ph token punctuation">,</span>
    <span class="ph token keyword">void</span> <span class="ph token operator">*</span> sourceBuffer<span class="ph token punctuation">,</span> uint32_t blockStart<span class="ph token punctuation">,</span>uint32_t nBlock<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token comment">/* Function register the event handler with media */</span>
    <span class="ph token keyword">void</span> <span class="ph token punctuation">(</span><span class="ph token operator">*</span>eventHandlerset<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span>DRV_HANDLE handle<span class="ph token punctuation">,</span> <span class="ph token keyword">const</span> <span class="ph token keyword">void</span> <span class="ph token operator">*</span> eventHandler<span class="ph token punctuation">,</span> <span class="ph token keyword">const</span> uintptr_t context<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token comment">/* Function to obtain the command status */</span>
    SYS_FS_MEDIA_COMMAND_STATUS <span class="ph token punctuation">(</span><span class="ph token operator">*</span>commandStatusGet<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span>DRV_HANDLE handle<span class="ph token punctuation">,</span>
    SYS_FS_MEDIA_BLOCK_COMMAND_HANDLE commandHandle<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token comment">/* Function to read certain bytes from the media */</span>
    <span class="ph token keyword">void</span> <span class="ph token punctuation">(</span><span class="ph token operator">*</span>Read<span class="ph token punctuation">)</span> <span class="ph token punctuation">(</span>DRV_HANDLE clientHandle<span class="ph token punctuation">,</span>SYS_FS_MEDIA_BLOCK_COMMAND_HANDLE <span class="ph token operator">*</span> commandHandle<span class="ph token punctuation">,</span>
    <span class="ph token keyword">void</span> <span class="ph token operator">*</span> buffer<span class="ph token punctuation">,</span> uint32_t blockStart<span class="ph token punctuation">,</span> uint32_t nBlock<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token comment">/* Function to obtain the address of the media (to be used for NVM only) */</span>
    uintptr_t <span class="ph token punctuation">(</span><span class="ph token operator">*</span>addressGet<span class="ph token punctuation">)</span> <span class="ph token punctuation">(</span> <span class="ph token keyword">const</span> DRV_HANDLE hClient<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token keyword">void</span> <span class="ph token punctuation">(</span><span class="ph token operator">*</span>erase<span class="ph token punctuation">)</span> <span class="ph token punctuation">(</span> <span class="ph token keyword">const</span> DRV_HANDLE handle<span class="ph token punctuation">,</span>SYS_FS_MEDIA_BLOCK_COMMAND_HANDLE <span class="ph token operator">*</span> commandHandle<span class="ph token punctuation">,</span>
    uint32_t blockStart<span class="ph token punctuation">,</span>uint32_t nBlock<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token comment">/* Function to open the media driver */</span>
    DRV_HANDLE <span class="ph token punctuation">(</span><span class="ph token operator">*</span>open<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span>SYS_MODULE_INDEX index<span class="ph token punctuation">,</span> DRV_IO_INTENT intent<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token comment">/* Function to close the media */</span>
    <span class="ph token keyword">void</span> <span class="ph token punctuation">(</span><span class="ph token operator">*</span>close<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span>DRV_HANDLE client<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token comment">/* Task function of the media */</span>
    <span class="ph token keyword">void</span> <span class="ph token punctuation">(</span><span class="ph token operator">*</span>tasks<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span>SYS_MODULE_OBJ obj<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    
<span class="ph token punctuation">}</span> SYS_FS_MEDIA_FUNCTIONS<span class="ph token punctuation">;</span>
</code></pre></div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title3" id="summary"><h2 class="title topictitle2" id="ariaid-title3">Summary</h2><div class="body"><p class="p">Structure of function pointers for media driver</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title4" id="description"><h2 class="title topictitle2" id="ariaid-title4">Description</h2><div class="body"><p class="p">This structure contains the definition for functions of media driver, which
is registered with the media manager. In future, if any new driver needs to
be registered with the media manager (say, to act as a media for file
system), the new driver should have implemented all these functions.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title5" id="remarks"><h2 class="title topictitle2" id="ariaid-title5">Remarks</h2><div class="body"><p class="p">None.</p>
</div>
</div>
</body>
</html>