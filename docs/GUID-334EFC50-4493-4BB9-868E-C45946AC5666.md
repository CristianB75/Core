# DRV\_SDMMC\_CommandStatus Function

**Parent topic:**[Library Interface](GUID-D15D1321-065D-4EA7-A00C-D277A8A66F8D.md)

## C

```c
DRV_SDMMC_COMMAND_STATUS DRV_SDMMC_CommandStatus (
    const DRV_HANDLE handle,
    const DRV_SDMMC_COMMAND_HANDLE commandHandle
);
```

## Summary

Gets the current status of the command.

## Description

This routine gets the current status of the command. The application must use<br />this routine where the status of a scheduled command needs to be polled on. The<br />function may return DRV\_SDMMC\_COMMAND\_ERROR\_UNKNOWN in a case where the command<br />handle has expired. A command handle expires when the internal buffer object<br />is re-assigned to another read or write request. It is recommended that this<br />function be called regularly in order to track the command status correctly.

The application can alternatively register an event handler to receive read or<br />write operation completion events.

## Preconditions

The DRV\_SDMMC\_Initialize routine must have been called. The DRV\_SDMMC\_Open must have been called to obtain a valid opened device handle.

## Parameters

|Param|Description|
|-----|-----------|
|handle|A valid open-instance handle, returned from the driver's open routine|

## Returns

A DRV\_SDMMC\_COMMAND\_STATUS value describing the current status of the command.

Returns DRV\_SDMMC\_COMMAND\_ERROR\_UNKNOWN if the client handle or the command handle is not valid.

## Example

```c
DRV_HANDLE handle; // Returned from DRV_SDMMC_Open
DRV_SDMMC_COMMAND_HANDLE commandHandle;
DRV_SDMMC_COMMAND_STATUS status;

status = DRV_SDMMC_CommandStatus(handle, commandHandle);
if(status == DRV_SDMMC_COMMAND_COMPLETED)
{
    // Operation Done
}
```

## Remarks

This routine will not block for hardware access and will immediately return the current status.

