# DRV\_USART\_Open Function

**Parent topic:**[Library Interface](GUID-80FC4C27-64D2-411F-BE4A-4C4A8BD80604.md)

## C

```c
DRV_HANDLE DRV_USART_Open
(
    const SYS_MODULE_INDEX index,
    const DRV_IO_INTENT ioIntent
)
```

## Summary

Opens the specified USART driver instance and returns a handle to it.

## Description

This routine opens the specified USART driver instance and provides a<br />handle that must be provided to all other client-level operations to<br />identify the caller and the instance of the driver. The ioIntent<br />parameter defines how the client interacts with this driver instance.

Specifying a DRV\_IO\_INTENT\_EXCLUSIVE will cause the driver to provide<br />exclusive access to this client. The driver cannot be opened by any<br />other client.

## Precondition

Function DRV\_USART\_Initialize must have been called before calling this function.

## Parameters

|Param|Description|
|-----|-----------|
|index|Identifier for the object instance to be opened|
|intent|Zero or more of the values from the enumeration DRV\_IO\_INTENT "ORed" together to indicate the intended use of the driver. See function description for details.|

## Returns

If successful, the routine returns a valid open-instance handle \(a number identifying both the caller and the module instance\).

If an error occurs, the return value is DRV\_HANDLE\_INVALID. Error can occur

-   if the number of client objects allocated via DRV\_USART\_CLIENTS\_NUMBER is insufficient.

-   if the client is trying to open the driver but driver has been opened exclusively by another client.

-   if the driver peripheral instance being opened is not initialized or is invalid.

-   if the client is trying to open the driver exclusively, but has already been opened in a non exclusive mode by another client.

-   if the driver is not ready to be opened, typically when the initialize routine has not completed execution.


## Example

```c
DRV_HANDLE handle;

handle = DRV_USART_Open(DRV_USART_INDEX_0, DRV_IO_INTENT_EXCLUSIVE);
if (handle == DRV_HANDLE_INVALID)
{
    // Unable to open the driver
    // May be the driver is not initialized or the initialization
    // is not complete.
}
```

## Remarks

The handle returned is valid until the DRV\_USART\_Close routine is called. This routine will NEVER block waiting for hardware. If the requested intent flags are not supported, the routine will return DRV\_HANDLE\_INVALID. This function is thread safe in a RTOS application.

