# SYS\_FS\_Initialize Function

**Parent topic:**[Library Interface](GUID-42556FDF-A632-49FE-8A5E-9303A926578C.md)

## C

```c
SYS_FS_RESULT SYS_FS_Initialize
(
    const void* initData
);
```

## Summary

Initializes the file system abstraction layer \(sys\_fs layer\).

## Description

This function initializes the abstraction layer \(sys\_fs layer\) and sets<br />up the necessary parameters.

## Precondition

This is the first function to be called during usage of sys\_fs. Calling other functions of sys\_fs without initializing the sys\_fs will cause unpredictable behavior.

## Parameters

|Param|Description|
|-----|-----------|
|initData|Pointer to an array of type SYS\_FS\_REGISTRATION\_TABLE. The number of elements of array is decided by the definition SYS\_FS\_MAX\_FILE\_SYSTEM\_TYPE. If the application uses one file system \(say only FAT FS\), SYS\_FS\_MAX\_FILE\_SYSTEM\_TYPE is defined to be 1. Otherwise, if the application uses 2 file systems \(say FAT FS and MPFS2\), SYS\_FS\_MAX\_FILE\_SYSTEM\_TYPE is defined to be 2.|

## Returns

*SYS\_FS\_RES\_SUCCESS* - SYS FS Layer was initialized successfully.

*SYS\_FS\_RES\_FAILURE* - SYS FS Layer initialization failed. The reason for<br />the failure can be retrieved with SYS\_FS\_Error.

## Example

```c
// This code shows an example of how the SYS FS is initialized
// Only one file system is used

#define SYS_FS_MAX_FILE_SYSTEM_TYPE 1

// Function pointer table for FAT FS
const SYS_FS_FUNCTIONS FatFsFunctions =
{
    .mount = FATFS_mount,
    .unmount = FATFS_unmount,
    .open = FATFS_open,
    .read = FATFS_read,
    .write = FATFS_write,
    .close = FATFS_close,
    .seek = FATFS_lseek,
    .tell = FATFS_tell,
    .eof = FATFS_eof,
    .size = FATFS_size,
    .fstat = FATFS_stat,
};

const SYS_FS_REGISTRATION_TABLE sysFSInit [ SYS_FS_MAX_FILE_SYSTEM_TYPE ] =
{
    {
        .nativeFileSystemType = FAT,
        .nativeFileSystemFunctions = &FatFsFunctions
    }
};

SYS_FS_Initialize((const void *)sysFSInit);

```

