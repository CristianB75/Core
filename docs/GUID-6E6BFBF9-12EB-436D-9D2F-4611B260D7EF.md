# DRV\_MEMORY\_CommandStatusGet Function

**Parent topic:**[Library Interface](GUID-E18B0923-4286-4E08-A2EB-9A482E0063AE.md)

## C

```c
DRV_MEMORY_COMMAND_STATUS DRV_MEMORY_CommandStatusGet
(
    const DRV_HANDLE handle,
    const DRV_MEMORY_COMMAND_HANDLE commandHandle
);
```

## Summary

Gets the current status of the command.

## Description

This routine gets the current status of the buffer. The application must use<br />this routine where the status of a scheduled buffer needs to polled on.

The function may return DRV\_MEMORY\_COMMAND\_HANDLE\_INVALID in a case where the<br />buffer handle has expired. A buffer handle expires when the internal buffer object<br />is re-assigned to another erase or write request. It is recommended that this<br />function be called regularly in order to track the buffer status correctly.

The application can alternatively register an event handler to receive write<br />or erase operation completion events.

## Preconditions

DRV\_MEMORY\_Open\(\) must have been called to obtain a valid opened device handle.

## Parameters

|Param|Description|
|-----|-----------|
|handle|A valid open-instance handle, returned from the driver's open function|
|commandHandle|Pointer to an argument that will contain the command handle|

## Returns

-   DRV\_MEMORY\_COMMAND\_COMPLETED

    -   If the transfer request is completed

-   DRV\_MEMORY\_COMMAND\_QUEUED

    -   If the command is Queued and waiting to be processed.

-   DRV\_MEMORY\_COMMAND\_IN\_PROGRESS

    -   If the current transfer request is still being processed

-   DRV\_MEMORY\_COMMAND\_ERROR\_UNKNOWN

    -   If the handle is invalid

    -   If the status read request fails


## Example

```c
// memoryHandle is the handle returned by the DRV_MEMORY_Open function.
// commandHandle is the handle returned by any read/write/erase block operation.

if (DRV_MEMORY_COMMAND_COMPLETED == DRV_MEMORY_CommandStatusGet(memoryHandle, commandHandle))
{
    // Operation Done
}

```

## Remarks

Used in Async mode of operation.

