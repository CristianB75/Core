# DRV\_SDSPI\_CommandStatusGet Function

**Parent topic:**[Library Interface](GUID-7A1B4F41-7CC6-49CF-941E-25265059D247.md)

## C

```c
DRV_SDSPI_COMMAND_STATUS DRV_SDSPI_CommandStatusGet
(
    const DRV_HANDLE handle,
    const DRV_SDSPI_COMMAND_HANDLE commandHandle
)
```

## Summary

Gets the current status of the command. For synchronous mode, the command status is only used by the file system.

## Description

This routine gets the current status of the command. The application must use<br />this routine where the status of a scheduled command needs to be polled on. The<br />function may return DRV\_SDSPI\_COMMAND\_HANDLE\_INVALID in a case where the command<br />handle has expired. A command handle expires when the internal buffer object<br />is re-assigned to another read or write request. It is recommended that this<br />function be called regularly in order to track the command status correctly.

The application can alternatively register an event handler to receive read or<br />write operation completion events.

## Preconditions

The DRV\_SDSPI\_Initialize routine must have been called.

The DRV\_SDSPI\_Open must have been called to obtain a valid opened device handle.

A read or write request must have been submitted to the SDSPI driver.

## Parameters

|Param|Description|
|-----|-----------|
|handle|A valid open-instance handle, returned from the driver's open routine|
|commandHandle|Handle to the command whose status is to be known.|

## Returns

A DRV\_SDSPI\_COMMAND\_STATUS value describing the current status of the command.

DRV\_SDSPI\_COMMAND\_ERROR\_UNKNOWN if the client handle or the command handle is not valid.

## Example

None.

## Remarks

This API may not be used in applications using the SDSPI Driver in synchronous mode.

